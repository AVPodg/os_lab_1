# Программа Calculator - Дочерние процессы и межпроцессное взаимодействие
## Описание
* Программа демонстрирует межпроцессное взаимодействие между родительским и дочерним процессами с использованием pipes и сигналов. Родительский процесс читает команды из файла и передает их дочернему процессу, который выполняет математические операции деления.

## Функциональность
### Родительский процесс:
- Читает команды из текстового файла
- Создает pipe для общения с дочерним процессом
- Запускает дочерний процесс
- Передает команды через pipe
- Обрабатывает сигналы об ошибках от дочернего процесса
- Ожидает завершения дочернего процесса

### Дочерний процесс:
- Получает команды через pipe (перенаправленный stdin)
- Парсит строки с числами
- Выполняет последовательное деление чисел
- Обнаруживает деление на ноль
- Отправляет сигнал родителю при ошибке
- Выводит промежуточные и итоговые результаты

## Компиляция
```bash
make
```

## Или вручную:

```bash
gcc -Wall -Wextra -std=c99 -c main.c
gcc -Wall -Wextra -std=c99 -c child.c
gcc -Wall -Wextra -std=c99 -o calculator main.o child.o
```

## Использование
```bash
make run
```
### Пример файла с командами (commands.txt):
```text
100 2 5
64 4 2 2
15 3
8 2 2
10 0 5
20 5
```
### Запуск:
```bash
make run
```
### Формат команд
- Каждая строка в файле - отдельная команда
- Числа разделяются пробелами или табуляцией
- Первое число - делимое
- Последующие числа - делители
- Минимум 2 числа на строку
- Пустые строки игнорируются

### Пример выполнения
```text
Родительский процесс PID: 1234
Дочерний процесс PID: 1235
Файл: commands.txt

Родитель: Отправка команды 1: 100 2 5
Дочерний: Получена команда 1: 100 2 5
Дочерний: Делимое: 100
Дочерний: Делитель 1: 2
Дочерний: Промежуточный результат: 50
Дочерний: Делитель 2: 5
Дочерний: Промежуточный результат: 10
Дочерний: Результат: 10

Родитель: Отправка команды 2: 64 4 2 2
Дочерний: Получена команда 2: 64 4 2 2
...
```

### Особенности реализации
- Без использования stdio: Программа использует только системные вызовы (read, write, open, close)
- Обработка ошибок: Детектирование деления на ноль и парсинга чисел
- Сигналы: Использование SIGUSR1 для уведомления об ошибках
- Динамическая память: Автоматическое расширение массивов при необходимости
- Безопасность: Проверка всех системных вызовов на ошибки
- Обработка ошибок

### Программа обрабатывает следующие ошибки:
- Деление на ноль
- Неправильный формат чисел
- Ошибки ввода-вывода
- Ошибки создания процессов и pipes
- Ошибки выделения памяти

### Файлы проекта
- main.c - родительский процесс
- child.c - дочерний процесс
- child.h - заголовочный файл
- Makefile - сборка проекта

### Очистка
```bash
make clean
```
